# 시럽조제기 연결 관리자 (JavaScript 버전)

이 프로그램은 아두이노 R4 WiFi 모델과의 연결을 관리하는 Electron 기반 데스크톱 애플리케이션입니다.

## 🚀 주요 기능

- **현대적인 UI/UX**: Bootstrap 5와 커스텀 CSS로 구현된 아름다운 인터페이스
- **네트워크 자동 스캔**: 아두이노 기기 자동 감지 및 연결
- **처방전 파일 모니터링**: 실시간 처방전 파일 감지 및 파싱
- **자동 조제**: F12 키 또는 자동 모드로 조제 시작
- **실시간 로그**: 모든 작업의 실시간 로그 표시
- **크로스 플랫폼**: Windows, macOS, Linux 지원

## 📦 설치 방법

### 1. Node.js 설치
[Node.js 공식 사이트](https://nodejs.org/)에서 LTS 버전을 다운로드하여 설치하세요.

### 2. 프로젝트 의존성 설치
```bash
npm install
```

### 3. 개발 모드 실행
```bash
npm run dev
```

### 4. 프로덕션 빌드
```bash
npm run build
```

## 🎯 사용 방법

### 기본 사용법
1. 프로그램을 실행하면 메인 페이지가 표시됩니다.
2. "네트워크 설정" 버튼을 클릭하여 시럽조제기를 연결합니다.
3. 처방전 파일 경로를 설정합니다.
4. 환자를 선택하고 F12 키를 눌러 조제를 시작합니다.

### 네트워크 설정
1. "네트워크 설정" 페이지로 이동
2. "스캔 시작" 버튼을 클릭하여 기기를 찾습니다.
3. 발견된 기기를 선택하고 약품명과 코드를 입력합니다.
4. "저장" 버튼을 클릭하여 연결 정보를 저장합니다.
5. "연결" 버튼을 클릭하여 기기에 연결합니다.

### 자동 조제
- "자동 조제 활성화" 체크박스를 선택하면 새로운 처방전이 감지될 때 자동으로 조제가 시작됩니다.

## 🛠️ 기술 스택

- **Electron**: 크로스 플랫폼 데스크톱 애플리케이션
- **Bootstrap 5**: 현대적인 UI 컴포넌트
- **Axios**: HTTP 클라이언트
- **Moment.js**: 날짜/시간 처리
- **Flatpickr**: 날짜 선택기
- **Node-cron**: 주기적 작업 스케줄링

## 📁 프로젝트 구조

```
arduino-connector/
├── main.js              # Electron 메인 프로세스
├── index.html           # 메인 HTML 파일
├── renderer.js          # 렌더러 프로세스 (UI 로직)
├── styles.css           # 커스텀 CSS 스타일
├── package.json         # 프로젝트 설정 및 의존성
├── connections.json     # 저장된 연결 정보
├── prescription_path.txt # 처방전 파일 경로
└── README.md           # 프로젝트 문서
```

## 🔧 설정 파일

### connections.json
```json
{
  "connections": {
    "MAC_ADDRESS": {
      "ip": "172.30.1.100",
      "nickname": "약품명",
      "pill_code": "약품코드"
    }
  }
}
```

### prescription_path.txt
처방전 파일이 저장된 폴더 경로

## 🎨 UI 특징

- **그라데이션 배경**: 현대적인 그라데이션 디자인
- **카드 기반 레이아웃**: 깔끔하고 직관적인 카드 UI
- **호버 효과**: 부드러운 애니메이션과 호버 효과
- **반응형 디자인**: 다양한 화면 크기에 대응
- **다크 테마 로그**: 개발자 친화적인 로그 표시

## 🔌 네트워크 설정

- **기본 네트워크 범위**: 172.30.1.1 ~ 172.30.1.254
- **스캔 간격**: 5초마다 자동 스캔
- **연결 확인**: 10초마다 연결 상태 확인
- **타임아웃**: 1초 (빠른 응답)

## 📝 로그 시스템

- **실시간 로그**: 모든 작업의 실시간 기록
- **타임스탬프**: 정확한 시간 기록
- **스크롤 가능**: 긴 로그도 쉽게 확인
- **콘솔 출력**: 개발자 도구에서도 확인 가능

## 🚨 주의사항

- 네트워크 주소 범위가 기본적으로 "172.30.1."로 설정되어 있습니다.
- 연결 정보는 `connections.json` 파일에 저장됩니다.
- 처방전 파일은 UTF-8, CP949, EUC-KR 인코딩을 지원합니다.
- 프로그램 종료 시 자동으로 연결이 해제됩니다.

## 🐛 문제 해결

### 기기가 감지되지 않는 경우
1. 네트워크 연결 상태를 확인하세요.
2. 아두이노 기기의 IP 주소 범위를 확인하세요.
3. 방화벽 설정을 확인하세요.

### 연결이 자주 끊기는 경우
1. 네트워크 신호 강도를 확인하세요.
2. 기기와 컴퓨터의 거리를 줄이세요.
3. 다른 네트워크 장비의 간섭을 확인하세요.

## 📄 라이선스

MIT License

## 🤝 기여하기

1. Fork the Project
2. Create your Feature Branch (`git checkout -b feature/AmazingFeature`)
3. Commit your Changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the Branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## 📞 지원

문제가 발생하거나 기능 요청이 있으시면 이슈를 생성해주세요. 